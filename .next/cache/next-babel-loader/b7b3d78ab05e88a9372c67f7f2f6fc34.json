{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @jsx jsx */\nimport { useEffect, useState } from \"react\";\nimport { jsx, Text, Button, Link } from \"theme-ui\";\nimport Lightbox from \"react-image-lightbox\";\nimport OpenWithIcon from \"@material-ui/icons/OpenWith\";\nimport { VARIANTS_PRINTFUL, SIZES } from \"../../constants/constants\";\nimport Tab3Checkout from \"./tab3Checkout\";\nimport CustomLoader from \"../CustomLoader\";\nimport { useGetDataPrintful } from \"../../Hooks/useGetDataPrintful\";\nimport { getVersionDescription } from \"../../Lib/getVersionDescription\";\nimport { useGetShippingInfoPrintful } from \"../../Hooks/useGetShippingInfoPrintful\";\nexport default function Tab3({\n  map,\n  mapTitles,\n  activeLayout,\n  product,\n  setProduct,\n  activeMapStyle\n}) {\n  const {\n    0: lightbox,\n    1: setLightbox\n  } = useState({\n    open: false,\n    activeSrc: null\n  });\n  const {\n    data: dataPrintful\n  } = useGetDataPrintful(VARIANTS_PRINTFUL.map(variant => variant.id));\n  const {\n    shippingInfoObject,\n    isShippingInfoLoading\n  } = useGetShippingInfoPrintful(product.variantId); //TODO single size can have multiple vriants..could switch to different variant\n\n  const findVariant = newSize => {\n    var _VARIANTS_PRINTFUL$fi;\n\n    const currentFrameName = (_VARIANTS_PRINTFUL$fi = VARIANTS_PRINTFUL.find(variant => variant.id === product.variantId)) === null || _VARIANTS_PRINTFUL$fi === void 0 ? void 0 : _VARIANTS_PRINTFUL$fi.frameName;\n    return VARIANTS_PRINTFUL.find(variant => variant.sizeName === newSize && variant.frameName === currentFrameName);\n  };\n\n  const findNewSizeSameOrientation = newSizeCode => SIZES.find(size => size.acceptableSizes.includes(newSizeCode) && size.orientation === product.sizeObject.orientation);\n\n  const setNewProduct = sizeCode => {\n    const newVariant = findVariant(sizeCode);\n    const newSizeObject = findNewSizeSameOrientation(sizeCode);\n    setProduct(prev => {\n      var _dataPrintful$newVari;\n\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        sizeObject: newSizeObject,\n        variantId: newVariant.id,\n        price: (_dataPrintful$newVari = dataPrintful[newVariant.id]) === null || _dataPrintful$newVari === void 0 ? void 0 : _dataPrintful$newVari.price,\n        shippingCode: newVariant.shipping.codeCZ\n      });\n    });\n  };\n\n  const setNewFrame = (variantId, shippingCode) => {\n    //TODO there has to be price, otherwise return?\n    setProduct(prev => {\n      var _dataPrintful$variant;\n\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        variantId: variantId,\n        price: (_dataPrintful$variant = dataPrintful[variantId]) === null || _dataPrintful$variant === void 0 ? void 0 : _dataPrintful$variant.price,\n        shippingCode\n      });\n    });\n  };\n\n  const sizesArray = VARIANTS_PRINTFUL.map(variant => variant.sizeName);\n  const arrSingleSizeNames = Array.from(new Set(sizesArray));\n  const variantsPrintfulForSize = VARIANTS_PRINTFUL.filter(variant => {\n    var _dataPrintful$variant2;\n\n    const isVariantForOffer = product.sizeObject.acceptableSizes.includes(variant.sizeName) && dataPrintful && ((_dataPrintful$variant2 = dataPrintful[variant.id]) === null || _dataPrintful$variant2 === void 0 ? void 0 : _dataPrintful$variant2.availableEU);\n    return isVariantForOffer;\n  });\n  return jsx(\"div\", {\n    sx: styles.container\n  }, jsx(Text, {\n    as: \"p\",\n    className: \"description\",\n    sx: styles.headingDesc\n  }, \"Rozm\\u011Bry\"), jsx(\"div\", {\n    sx: styles.sizeWrap\n  }, dataPrintful && arrSingleSizeNames.map(sizeNameLocal => {\n    var _SIZES$find;\n\n    return jsx(\"div\", {\n      className: product.sizeObject.acceptableSizes.includes(sizeNameLocal) && \"active\",\n      sx: styles.sizeItem,\n      onClick: () => setNewProduct(sizeNameLocal)\n    }, jsx(\"p\", {\n      sx: styles.itemText\n    }, (_SIZES$find = SIZES.find(size => size.code === sizeNameLocal)) === null || _SIZES$find === void 0 ? void 0 : _SIZES$find.name));\n  })), jsx(Text, {\n    as: \"p\",\n    className: \"description\",\n    sx: styles.headingDesc\n  }, \"R\\xE1mov\\xE1n\\xED\"), variantsPrintfulForSize.length === 0 && jsx(\"div\", {\n    sx: styles.loaderWrap\n  }, jsx(CustomLoader, null)), variantsPrintfulForSize.length > 0 && jsx(\"div\", {\n    sx: styles.variantWrap\n  }, variantsPrintfulForSize.map(({\n    id: variantId,\n    shipping\n  }) => {\n    var _dataPrintful$variant3, _dataPrintful$variant4, _dataPrintful$variant5, _dataPrintful$variant6, _dataPrintful$variant7;\n\n    return jsx(\"div\", {\n      sx: styles.borderWrap,\n      className: product.variantId === variantId && \"active\",\n      onClick: () => setNewFrame(variantId, shipping.codeCZ)\n    }, jsx(\"div\", {\n      sx: styles.imageWrap\n    }, jsx(\"img\", {\n      sx: styles.variantImage,\n      src: (_dataPrintful$variant3 = dataPrintful[variantId]) === null || _dataPrintful$variant3 === void 0 ? void 0 : _dataPrintful$variant3.url\n    })), jsx(\"div\", {\n      sx: styles.textsWrap\n    }, jsx(\"p\", {\n      sx: styles.variantPrice\n    }, (_dataPrintful$variant4 = dataPrintful[variantId]) === null || _dataPrintful$variant4 === void 0 ? void 0 : _dataPrintful$variant4.currency, \" \", Math.floor(Number((_dataPrintful$variant5 = dataPrintful[variantId]) === null || _dataPrintful$variant5 === void 0 ? void 0 : _dataPrintful$variant5.price) * 100) / 100), jsx(\"p\", {\n      sx: styles.variantDesc\n    }, getVersionDescription(variantId)), jsx(\"p\", {\n      sx: styles.variantDelivery\n    }, `+ ${(_dataPrintful$variant6 = dataPrintful[variantId]) === null || _dataPrintful$variant6 === void 0 ? void 0 : _dataPrintful$variant6.shipping.currency} ${(_dataPrintful$variant7 = dataPrintful[variantId]) === null || _dataPrintful$variant7 === void 0 ? void 0 : _dataPrintful$variant7.shipping.rate} doprava`)));\n  })), jsx(Text, {\n    as: \"p\",\n    className: \"description\",\n    sx: styles.headingDesc\n  }, \"Materi\\xE1l pro tisk\"), jsx(\"p\", {\n    sx: styles.materialDesc\n  }, product.materialDesc), jsx(Tab3Checkout, {\n    map: map,\n    mapTitles: mapTitles,\n    activeLayout: activeLayout,\n    product: product,\n    activeMapStyle: activeMapStyle,\n    dataPrintfulVariant: dataPrintful && dataPrintful[product.variantId]\n  }), lightbox.open && jsx(Lightbox, {\n    mainSrc: lightbox.activeSrc,\n    onCloseRequest: () => setLightbox({\n      open: false\n    })\n  }));\n}\nconst styles = {\n  container: {\n    width: \"100%\",\n    padding: \"10px\",\n    pb: \"70px\"\n  },\n  headingDesc: {\n    fontWeight: 700,\n    textAlign: \"left\",\n    margin: \"10px\"\n  },\n  TabWrap: {\n    display: \"flex\",\n    width: \"100%\"\n  },\n  Tab: {\n    width: \"30%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    \"&.active\": {\n      borderBottom: \"3px solid black\"\n    }\n  },\n  sizeWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    justifyContent: \"flex-start\"\n  },\n  sizeItem: {\n    margin: \"2%\",\n    padding: \"4px\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    border: \"1px solid black\",\n    cursor: \"pointer\",\n    backgroundColor: \"white\",\n    \"&.active\": {\n      border: \"2px solid\",\n      borderColor: \"cta_color\",\n      color: \"black\"\n    },\n    \"&.disabled\": {\n      border: \"0px\",\n      color: \"lightGrey\"\n    }\n  },\n  itemText: {\n    margin: 0,\n    paddingTop: \"5px\"\n  },\n  materialDesc: {\n    textAlign: \"left\",\n    px: \"10px\"\n  },\n  loaderWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    minHeight: \"20vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  variantWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    minHeight: \"20vh\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\"\n  },\n  borderWrap: {\n    // border: \"2px solid white\",\n    boxShadow: \"1px 1px 4px rgba(0,0,0,0.2)\",\n    // borderRadius: \"2px\",\n    height: \"100%\",\n    width: [\"46%\", \"31%\", \"31%\", \"46%\", \"46%\", \"31%\"],\n    margin: [\"2%\", \"1%\", \"1%\", \"2%\", \"2%\", \"1%\"],\n    // padding: \"4px\",\n    // height: \"200px\",\n    borderRadius: \"10px\",\n    display: \"flex\",\n    cursor: \"pointer\",\n    flexDirection: \"column\",\n    backgroundColor: \"white\",\n    overflow: \"hidden\",\n    \"&.active\": {\n      border: \"2px solid\",\n      borderColor: \"cta_color\",\n      boxShadow: \"3px 3px 5px rgba(0,0,0,0.3)\"\n    }\n  },\n  imageWrap: {\n    position: \"relative\",\n    // height: \"80%\",\n    display: \"flex\",\n    justifyContent: \"center\"\n  },\n  variantImage: {\n    position: \"relative\",\n    height: \"170px\"\n  },\n  // openImageIcon: {\n  //   position: \"absolute\",\n  //   top: 0,\n  //   right: 0,\n  //   backgroundColor: \"#00000029\",\n  //   borderRadius: \"2px\",\n  //   cursor: \"pointer\",\n  // },\n  textsWrap: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    // justifyContent: \"flex-start\",\n    padding: \"5px\",\n    textAlign: \"left\"\n  },\n  variantPrice: {\n    margin: 0,\n    // px: \"5px\",\n    // mx: \"2px\",\n    // position: \"absolute\",\n    // bottom: 0,\n    // right: 0,\n    color: \"primary\",\n    fontWeight: 600,\n    // backgroundColor: \"#ffffffe9\",\n    borderRadius: \"2px\",\n    cursor: \"pointer\" // color: \"white\",\n    // \"&.active\": {\n    //   color: \"#fe6769\",\n    // },\n\n  },\n  variantDesc: {\n    lineHeight: 1.2,\n    fontSize: \"0.8rem\",\n    fontWeight: 500,\n    paddingBottom: \"5px\",\n    // borderBottom: \"1px solid lightGrey\",\n    margin: 0\n  },\n  variantDelivery: {\n    color: \"muted\",\n    m: 0,\n    fontWeight: 600,\n    fontSize: \"0.6rem\"\n  }\n};","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/trip_map_staging/src/components/Tab3/tab3.js"],"names":["useEffect","useState","jsx","Text","Button","Link","Lightbox","OpenWithIcon","VARIANTS_PRINTFUL","SIZES","Tab3Checkout","CustomLoader","useGetDataPrintful","getVersionDescription","useGetShippingInfoPrintful","Tab3","map","mapTitles","activeLayout","product","setProduct","activeMapStyle","lightbox","setLightbox","open","activeSrc","data","dataPrintful","variant","id","shippingInfoObject","isShippingInfoLoading","variantId","findVariant","newSize","currentFrameName","find","frameName","sizeName","findNewSizeSameOrientation","newSizeCode","size","acceptableSizes","includes","orientation","sizeObject","setNewProduct","sizeCode","newVariant","newSizeObject","prev","price","shippingCode","shipping","codeCZ","setNewFrame","sizesArray","arrSingleSizeNames","Array","from","Set","variantsPrintfulForSize","filter","isVariantForOffer","availableEU","styles","container","headingDesc","sizeWrap","sizeNameLocal","sizeItem","itemText","code","name","length","loaderWrap","variantWrap","borderWrap","imageWrap","variantImage","url","textsWrap","variantPrice","currency","Math","floor","Number","variantDesc","variantDelivery","rate","materialDesc","width","padding","pb","fontWeight","textAlign","margin","TabWrap","display","Tab","justifyContent","borderBottom","flexWrap","border","cursor","backgroundColor","borderColor","color","paddingTop","px","minHeight","alignItems","boxShadow","height","borderRadius","flexDirection","overflow","position","lineHeight","fontSize","paddingBottom","m"],"mappings":";;;;;;;;;AAAA;AACA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4BC,IAA5B,QAAwC,UAAxC;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AAEA,SAASC,iBAAT,EAA4BC,KAA5B,QAAyC,2BAAzC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AAEA,SAASC,kBAAT,QAAmC,gCAAnC;AACA,SAASC,qBAAT,QAAsC,iCAAtC;AACA,SAASC,0BAAT,QAA2C,wCAA3C;AAEA,eAAe,SAASC,IAAT,CAAc;AAC3BC,EAAAA,GAD2B;AAE3BC,EAAAA,SAF2B;AAG3BC,EAAAA,YAH2B;AAI3BC,EAAAA,OAJ2B;AAK3BC,EAAAA,UAL2B;AAM3BC,EAAAA;AAN2B,CAAd,EAOZ;AACD,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0BtB,QAAQ,CAAC;AAAEuB,IAAAA,IAAI,EAAE,KAAR;AAAeC,IAAAA,SAAS,EAAE;AAA1B,GAAD,CAAxC;AAEA,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAyBf,kBAAkB,CAC/CJ,iBAAiB,CAACQ,GAAlB,CAAuBY,OAAD,IAAaA,OAAO,CAACC,EAA3C,CAD+C,CAAjD;AAIA,QAAM;AACJC,IAAAA,kBADI;AAEJC,IAAAA;AAFI,MAGFjB,0BAA0B,CAACK,OAAO,CAACa,SAAT,CAH9B,CAPC,CAYD;;AACA,QAAMC,WAAW,GAAIC,OAAD,IAAa;AAAA;;AAC/B,UAAMC,gBAAgB,4BAAG3B,iBAAiB,CAAC4B,IAAlB,CACtBR,OAAD,IAAaA,OAAO,CAACC,EAAR,KAAeV,OAAO,CAACa,SADb,CAAH,0DAAG,sBAEtBK,SAFH;AAIA,WAAO7B,iBAAiB,CAAC4B,IAAlB,CACJR,OAAD,IACEA,OAAO,CAACU,QAAR,KAAqBJ,OAArB,IAAgCN,OAAO,CAACS,SAAR,KAAsBF,gBAFnD,CAAP;AAID,GATD;;AAWA,QAAMI,0BAA0B,GAAIC,WAAD,IACjC/B,KAAK,CAAC2B,IAAN,CACGK,IAAD,IACEA,IAAI,CAACC,eAAL,CAAqBC,QAArB,CAA8BH,WAA9B,KACAC,IAAI,CAACG,WAAL,KAAqBzB,OAAO,CAAC0B,UAAR,CAAmBD,WAH5C,CADF;;AAOA,QAAME,aAAa,GAAIC,QAAD,IAAc;AAClC,UAAMC,UAAU,GAAGf,WAAW,CAACc,QAAD,CAA9B;AAEA,UAAME,aAAa,GAAGV,0BAA0B,CAACQ,QAAD,CAAhD;AAEA3B,IAAAA,UAAU,CAAE8B,IAAD;AAAA;;AAAA,6CACNA,IADM;AAETL,QAAAA,UAAU,EAAEI,aAFH;AAGTjB,QAAAA,SAAS,EAAEgB,UAAU,CAACnB,EAHb;AAITsB,QAAAA,KAAK,2BAAExB,YAAY,CAACqB,UAAU,CAACnB,EAAZ,CAAd,0DAAE,sBAA6BsB,KAJ3B;AAKTC,QAAAA,YAAY,EAAEJ,UAAU,CAACK,QAAX,CAAoBC;AALzB;AAAA,KAAD,CAAV;AAOD,GAZD;;AAcA,QAAMC,WAAW,GAAG,CAACvB,SAAD,EAAYoB,YAAZ,KAA6B;AAC/C;AACAhC,IAAAA,UAAU,CAAE8B,IAAD;AAAA;;AAAA,6CACNA,IADM;AAETlB,QAAAA,SAAS,EAAEA,SAFF;AAGTmB,QAAAA,KAAK,2BAAExB,YAAY,CAACK,SAAD,CAAd,0DAAE,sBAAyBmB,KAHvB;AAITC,QAAAA;AAJS;AAAA,KAAD,CAAV;AAMD,GARD;;AAUA,QAAMI,UAAU,GAAGhD,iBAAiB,CAACQ,GAAlB,CAAuBY,OAAD,IAAaA,OAAO,CAACU,QAA3C,CAAnB;AACA,QAAMmB,kBAAkB,GAAGC,KAAK,CAACC,IAAN,CAAW,IAAIC,GAAJ,CAAQJ,UAAR,CAAX,CAA3B;AAEA,QAAMK,uBAAuB,GAAGrD,iBAAiB,CAACsD,MAAlB,CAA0BlC,OAAD,IAAa;AAAA;;AACpE,UAAMmC,iBAAiB,GACrB5C,OAAO,CAAC0B,UAAR,CAAmBH,eAAnB,CAAmCC,QAAnC,CAA4Cf,OAAO,CAACU,QAApD,KACAX,YADA,+BAEAA,YAAY,CAACC,OAAO,CAACC,EAAT,CAFZ,2DAEA,uBAA0BmC,WAF1B,CADF;AAIA,WAAOD,iBAAP;AACD,GAN+B,CAAhC;AAQA,SACE;AAAK,IAAA,EAAE,EAAEE,MAAM,CAACC;AAAhB,KACE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,aAAvB;AAAqC,IAAA,EAAE,EAAED,MAAM,CAACE;AAAhD,oBADF,EAKE;AAAK,IAAA,EAAE,EAAEF,MAAM,CAACG;AAAhB,KACGzC,YAAY,IACX8B,kBAAkB,CAACzC,GAAnB,CAAwBqD,aAAD,IAAmB;AAAA;;AACxC,WACE;AACE,MAAA,SAAS,EACPlD,OAAO,CAAC0B,UAAR,CAAmBH,eAAnB,CAAmCC,QAAnC,CAA4C0B,aAA5C,KACA,QAHJ;AAKE,MAAA,EAAE,EAAEJ,MAAM,CAACK,QALb;AAME,MAAA,OAAO,EAAE,MAAMxB,aAAa,CAACuB,aAAD;AAN9B,OAQE;AAAG,MAAA,EAAE,EAAEJ,MAAM,CAACM;AAAd,sBACG9D,KAAK,CAAC2B,IAAN,CAAYK,IAAD,IAAUA,IAAI,CAAC+B,IAAL,KAAcH,aAAnC,CADH,gDACG,YAAmDI,IADtD,CARF,CADF;AAcD,GAfD,CAFJ,CALF,EAyBE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,aAAvB;AAAqC,IAAA,EAAE,EAAER,MAAM,CAACE;AAAhD,yBAzBF,EA4BGN,uBAAuB,CAACa,MAAxB,KAAmC,CAAnC,IACC;AAAK,IAAA,EAAE,EAAET,MAAM,CAACU;AAAhB,KACE,IAAC,YAAD,OADF,CA7BJ,EAiCGd,uBAAuB,CAACa,MAAxB,GAAiC,CAAjC,IACC;AAAK,IAAA,EAAE,EAAET,MAAM,CAACW;AAAhB,KACGf,uBAAuB,CAAC7C,GAAxB,CAA4B,CAAC;AAAEa,IAAAA,EAAE,EAAEG,SAAN;AAAiBqB,IAAAA;AAAjB,GAAD;AAAA;;AAAA,WAC3B;AACE,MAAA,EAAE,EAAEY,MAAM,CAACY,UADb;AAEE,MAAA,SAAS,EAAE1D,OAAO,CAACa,SAAR,KAAsBA,SAAtB,IAAmC,QAFhD;AAGE,MAAA,OAAO,EAAE,MAAMuB,WAAW,CAACvB,SAAD,EAAYqB,QAAQ,CAACC,MAArB;AAH5B,OAKE;AAAK,MAAA,EAAE,EAAEW,MAAM,CAACa;AAAhB,OACE;AACE,MAAA,EAAE,EAAEb,MAAM,CAACc,YADb;AAEE,MAAA,GAAG,4BAAEpD,YAAY,CAACK,SAAD,CAAd,2DAAE,uBAAyBgD;AAFhC,MADF,CALF,EAqBE;AAAK,MAAA,EAAE,EAAEf,MAAM,CAACgB;AAAhB,OACE;AAAG,MAAA,EAAE,EAAEhB,MAAM,CAACiB;AAAd,iCACGvD,YAAY,CAACK,SAAD,CADf,2DACG,uBAAyBmD,QAD5B,EACsC,GADtC,EAEGC,IAAI,CAACC,KAAL,CAAWC,MAAM,2BAAC3D,YAAY,CAACK,SAAD,CAAb,2DAAC,uBAAyBmB,KAA1B,CAAN,GAAyC,GAApD,IACC,GAHJ,CADF,EAME;AAAG,MAAA,EAAE,EAAEc,MAAM,CAACsB;AAAd,OACG1E,qBAAqB,CAACmB,SAAD,CADxB,CANF,EASE;AAAG,MAAA,EAAE,EAAEiC,MAAM,CAACuB;AAAd,OACI,KAAD,0BAAK7D,YAAY,CAACK,SAAD,CAAjB,2DAAK,uBAAyBqB,QAAzB,CAAkC8B,QAAS,IAAhD,0BAAmDxD,YAAY,CAACK,SAAD,CAA/D,2DAAmD,uBAAyBqB,QAAzB,CAAkCoC,IAAK,UAD7F,CATF,CArBF,CAD2B;AAAA,GAA5B,CADH,CAlCJ,EA2EE,IAAC,IAAD;AAAM,IAAA,EAAE,EAAC,GAAT;AAAa,IAAA,SAAS,EAAC,aAAvB;AAAqC,IAAA,EAAE,EAAExB,MAAM,CAACE;AAAhD,4BA3EF,EA+EE;AAAG,IAAA,EAAE,EAAEF,MAAM,CAACyB;AAAd,KAA6BvE,OAAO,CAACuE,YAArC,CA/EF,EAiFE,IAAC,YAAD;AACE,IAAA,GAAG,EAAE1E,GADP;AAEE,IAAA,SAAS,EAAEC,SAFb;AAGE,IAAA,YAAY,EAAEC,YAHhB;AAIE,IAAA,OAAO,EAAEC,OAJX;AAKE,IAAA,cAAc,EAAEE,cALlB;AAME,IAAA,mBAAmB,EAAEM,YAAY,IAAIA,YAAY,CAACR,OAAO,CAACa,SAAT;AANnD,IAjFF,EA0FGV,QAAQ,CAACE,IAAT,IACC,IAAC,QAAD;AACE,IAAA,OAAO,EAAEF,QAAQ,CAACG,SADpB;AAEE,IAAA,cAAc,EAAE,MAAMF,WAAW,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD;AAFnC,IA3FJ,CADF;AAmGD;AAED,MAAMyC,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE;AACTyB,IAAAA,KAAK,EAAE,MADE;AAETC,IAAAA,OAAO,EAAE,MAFA;AAGTC,IAAAA,EAAE,EAAE;AAHK,GADE;AAMb1B,EAAAA,WAAW,EAAE;AACX2B,IAAAA,UAAU,EAAE,GADD;AAEXC,IAAAA,SAAS,EAAE,MAFA;AAGXC,IAAAA,MAAM,EAAE;AAHG,GANA;AAWbC,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE,MADF;AAEPP,IAAAA,KAAK,EAAE;AAFA,GAXI;AAebQ,EAAAA,GAAG,EAAE;AACHR,IAAAA,KAAK,EAAE,KADJ;AAEHO,IAAAA,OAAO,EAAE,MAFN;AAGHE,IAAAA,cAAc,EAAE,QAHb;AAIH,gBAAY;AACVC,MAAAA,YAAY,EAAE;AADJ;AAJT,GAfQ;AAwBbjC,EAAAA,QAAQ,EAAE;AACR8B,IAAAA,OAAO,EAAE,MADD;AAERP,IAAAA,KAAK,EAAE,MAFC;AAGRW,IAAAA,QAAQ,EAAE,MAHF;AAIRF,IAAAA,cAAc,EAAE;AAJR,GAxBG;AA8Bb9B,EAAAA,QAAQ,EAAE;AACR0B,IAAAA,MAAM,EAAE,IADA;AAERJ,IAAAA,OAAO,EAAE,KAFD;AAGRM,IAAAA,OAAO,EAAE,MAHD;AAIRE,IAAAA,cAAc,EAAE,cAJR;AAKRG,IAAAA,MAAM,EAAE,iBALA;AAMRC,IAAAA,MAAM,EAAE,SANA;AAORC,IAAAA,eAAe,EAAE,OAPT;AAQR,gBAAY;AACVF,MAAAA,MAAM,EAAE,WADE;AAEVG,MAAAA,WAAW,EAAE,WAFH;AAGVC,MAAAA,KAAK,EAAE;AAHG,KARJ;AAaR,kBAAc;AACZJ,MAAAA,MAAM,EAAE,KADI;AAEZI,MAAAA,KAAK,EAAE;AAFK;AAbN,GA9BG;AAgDbpC,EAAAA,QAAQ,EAAE;AACRyB,IAAAA,MAAM,EAAE,CADA;AAERY,IAAAA,UAAU,EAAE;AAFJ,GAhDG;AAoDblB,EAAAA,YAAY,EAAE;AACZK,IAAAA,SAAS,EAAE,MADC;AAEZc,IAAAA,EAAE,EAAE;AAFQ,GApDD;AAyDblC,EAAAA,UAAU,EAAE;AACVuB,IAAAA,OAAO,EAAE,MADC;AAEVP,IAAAA,KAAK,EAAE,MAFG;AAGVW,IAAAA,QAAQ,EAAE,MAHA;AAIVQ,IAAAA,SAAS,EAAE,MAJD;AAKVV,IAAAA,cAAc,EAAE,QALN;AAMVW,IAAAA,UAAU,EAAE;AANF,GAzDC;AAkEbnC,EAAAA,WAAW,EAAE;AACXsB,IAAAA,OAAO,EAAE,MADE;AAEXP,IAAAA,KAAK,EAAE,MAFI;AAGXW,IAAAA,QAAQ,EAAE,MAHC;AAIXQ,IAAAA,SAAS,EAAE,MAJA;AAKXV,IAAAA,cAAc,EAAE,YALL;AAMXW,IAAAA,UAAU,EAAE;AAND,GAlEA;AA0EblC,EAAAA,UAAU,EAAE;AACV;AACAmC,IAAAA,SAAS,EAAE,6BAFD;AAGV;AACAC,IAAAA,MAAM,EAAE,MAJE;AAKVtB,IAAAA,KAAK,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CALG;AAMVK,IAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,CANE;AAOV;AACA;AACAkB,IAAAA,YAAY,EAAE,MATJ;AAUVhB,IAAAA,OAAO,EAAE,MAVC;AAWVM,IAAAA,MAAM,EAAE,SAXE;AAYVW,IAAAA,aAAa,EAAE,QAZL;AAaVV,IAAAA,eAAe,EAAE,OAbP;AAcVW,IAAAA,QAAQ,EAAE,QAdA;AAgBV,gBAAY;AACVb,MAAAA,MAAM,EAAE,WADE;AAEVG,MAAAA,WAAW,EAAE,WAFH;AAIVM,MAAAA,SAAS,EAAE;AAJD;AAhBF,GA1EC;AAiGblC,EAAAA,SAAS,EAAE;AACTuC,IAAAA,QAAQ,EAAE,UADD;AAET;AACAnB,IAAAA,OAAO,EAAE,MAHA;AAITE,IAAAA,cAAc,EAAE;AAJP,GAjGE;AAuGbrB,EAAAA,YAAY,EAAE;AACZsC,IAAAA,QAAQ,EAAE,UADE;AAEZJ,IAAAA,MAAM,EAAE;AAFI,GAvGD;AA2Gb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAhC,EAAAA,SAAS,EAAE;AACTiB,IAAAA,OAAO,EAAE,MADA;AAETiB,IAAAA,aAAa,EAAE,QAFN;AAGT;AACAvB,IAAAA,OAAO,EAAE,KAJA;AAKTG,IAAAA,SAAS,EAAE;AALF,GAnHE;AA0Hbb,EAAAA,YAAY,EAAE;AACZc,IAAAA,MAAM,EAAE,CADI;AAEZ;AACA;AACA;AACA;AACA;AACAW,IAAAA,KAAK,EAAE,SAPK;AAQZb,IAAAA,UAAU,EAAE,GARA;AASZ;AACAoB,IAAAA,YAAY,EAAE,KAVF;AAWZV,IAAAA,MAAM,EAAE,SAXI,CAYZ;AAEA;AACA;AACA;;AAhBY,GA1HD;AA4IbjB,EAAAA,WAAW,EAAE;AACX+B,IAAAA,UAAU,EAAE,GADD;AAEXC,IAAAA,QAAQ,EAAE,QAFC;AAGXzB,IAAAA,UAAU,EAAE,GAHD;AAIX0B,IAAAA,aAAa,EAAE,KAJJ;AAKX;AACAxB,IAAAA,MAAM,EAAE;AANG,GA5IA;AAoJbR,EAAAA,eAAe,EAAE;AACfmB,IAAAA,KAAK,EAAE,OADQ;AAEfc,IAAAA,CAAC,EAAE,CAFY;AAGf3B,IAAAA,UAAU,EAAE,GAHG;AAIfyB,IAAAA,QAAQ,EAAE;AAJK;AApJJ,CAAf","sourcesContent":["/** @jsx jsx */\nimport { useEffect, useState } from \"react\";\nimport { jsx, Text, Button, Link } from \"theme-ui\";\nimport Lightbox from \"react-image-lightbox\";\nimport OpenWithIcon from \"@material-ui/icons/OpenWith\";\n\nimport { VARIANTS_PRINTFUL, SIZES } from \"../../constants/constants\";\nimport Tab3Checkout from \"./tab3Checkout\";\nimport CustomLoader from \"../CustomLoader\";\n\nimport { useGetDataPrintful } from \"../../Hooks/useGetDataPrintful\";\nimport { getVersionDescription } from \"../../Lib/getVersionDescription\";\nimport { useGetShippingInfoPrintful } from \"../../Hooks/useGetShippingInfoPrintful\";\n\nexport default function Tab3({\n  map,\n  mapTitles,\n  activeLayout,\n  product,\n  setProduct,\n  activeMapStyle,\n}) {\n  const [lightbox, setLightbox] = useState({ open: false, activeSrc: null });\n\n  const { data: dataPrintful } = useGetDataPrintful(\n    VARIANTS_PRINTFUL.map((variant) => variant.id)\n  );\n\n  const {\n    shippingInfoObject,\n    isShippingInfoLoading,\n  } = useGetShippingInfoPrintful(product.variantId);\n\n  //TODO single size can have multiple vriants..could switch to different variant\n  const findVariant = (newSize) => {\n    const currentFrameName = VARIANTS_PRINTFUL.find(\n      (variant) => variant.id === product.variantId\n    )?.frameName;\n\n    return VARIANTS_PRINTFUL.find(\n      (variant) =>\n        variant.sizeName === newSize && variant.frameName === currentFrameName\n    );\n  };\n\n  const findNewSizeSameOrientation = (newSizeCode) =>\n    SIZES.find(\n      (size) =>\n        size.acceptableSizes.includes(newSizeCode) &&\n        size.orientation === product.sizeObject.orientation\n    );\n\n  const setNewProduct = (sizeCode) => {\n    const newVariant = findVariant(sizeCode);\n\n    const newSizeObject = findNewSizeSameOrientation(sizeCode);\n\n    setProduct((prev) => ({\n      ...prev,\n      sizeObject: newSizeObject,\n      variantId: newVariant.id,\n      price: dataPrintful[newVariant.id]?.price,\n      shippingCode: newVariant.shipping.codeCZ,\n    }));\n  };\n\n  const setNewFrame = (variantId, shippingCode) => {\n    //TODO there has to be price, otherwise return?\n    setProduct((prev) => ({\n      ...prev,\n      variantId: variantId,\n      price: dataPrintful[variantId]?.price,\n      shippingCode,\n    }));\n  };\n\n  const sizesArray = VARIANTS_PRINTFUL.map((variant) => variant.sizeName);\n  const arrSingleSizeNames = Array.from(new Set(sizesArray));\n\n  const variantsPrintfulForSize = VARIANTS_PRINTFUL.filter((variant) => {\n    const isVariantForOffer =\n      product.sizeObject.acceptableSizes.includes(variant.sizeName) &&\n      dataPrintful &&\n      dataPrintful[variant.id]?.availableEU;\n    return isVariantForOffer;\n  });\n\n  return (\n    <div sx={styles.container}>\n      <Text as=\"p\" className=\"description\" sx={styles.headingDesc}>\n        Rozměry\n      </Text>\n\n      <div sx={styles.sizeWrap}>\n        {dataPrintful &&\n          arrSingleSizeNames.map((sizeNameLocal) => {\n            return (\n              <div\n                className={\n                  product.sizeObject.acceptableSizes.includes(sizeNameLocal) &&\n                  \"active\"\n                }\n                sx={styles.sizeItem}\n                onClick={() => setNewProduct(sizeNameLocal)}\n              >\n                <p sx={styles.itemText}>\n                  {SIZES.find((size) => size.code === sizeNameLocal)?.name}\n                </p>\n              </div>\n            );\n          })}\n      </div>\n\n      <Text as=\"p\" className=\"description\" sx={styles.headingDesc}>\n        Rámování\n      </Text>\n      {variantsPrintfulForSize.length === 0 && (\n        <div sx={styles.loaderWrap}>\n          <CustomLoader />\n        </div>\n      )}\n      {variantsPrintfulForSize.length > 0 && (\n        <div sx={styles.variantWrap}>\n          {variantsPrintfulForSize.map(({ id: variantId, shipping }) => (\n            <div\n              sx={styles.borderWrap}\n              className={product.variantId === variantId && \"active\"}\n              onClick={() => setNewFrame(variantId, shipping.codeCZ)}\n            >\n              <div sx={styles.imageWrap}>\n                <img\n                  sx={styles.variantImage}\n                  src={dataPrintful[variantId]?.url}\n                />\n                {/* <OpenWithIcon\n                  sx={styles.openImageIcon}\n                  onClick={(e) => {\n                    setLightbox({\n                      open: true,\n                      activeSrc: dataPrintful[variantId]?.url,\n                    });\n                    e.stopPropagation();\n                  }}\n                /> */}\n              </div>\n              <div sx={styles.textsWrap}>\n                <p sx={styles.variantPrice}>\n                  {dataPrintful[variantId]?.currency}{\" \"}\n                  {Math.floor(Number(dataPrintful[variantId]?.price) * 100) /\n                    100}\n                </p>\n                <p sx={styles.variantDesc}>\n                  {getVersionDescription(variantId)}\n                </p>\n                <p sx={styles.variantDelivery}>\n                  {`+ ${dataPrintful[variantId]?.shipping.currency} ${dataPrintful[variantId]?.shipping.rate} doprava`}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      <Text as=\"p\" className=\"description\" sx={styles.headingDesc}>\n        Materiál pro tisk\n      </Text>\n\n      <p sx={styles.materialDesc}>{product.materialDesc}</p>\n\n      <Tab3Checkout\n        map={map}\n        mapTitles={mapTitles}\n        activeLayout={activeLayout}\n        product={product}\n        activeMapStyle={activeMapStyle}\n        dataPrintfulVariant={dataPrintful && dataPrintful[product.variantId]}\n      />\n\n      {lightbox.open && (\n        <Lightbox\n          mainSrc={lightbox.activeSrc}\n          onCloseRequest={() => setLightbox({ open: false })}\n        />\n      )}\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    width: \"100%\",\n    padding: \"10px\",\n    pb: \"70px\",\n  },\n  headingDesc: {\n    fontWeight: 700,\n    textAlign: \"left\",\n    margin: \"10px\",\n  },\n  TabWrap: {\n    display: \"flex\",\n    width: \"100%\",\n  },\n  Tab: {\n    width: \"30%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    \"&.active\": {\n      borderBottom: \"3px solid black\",\n    },\n  },\n\n  sizeWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    justifyContent: \"flex-start\",\n  },\n  sizeItem: {\n    margin: \"2%\",\n    padding: \"4px\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    border: \"1px solid black\",\n    cursor: \"pointer\",\n    backgroundColor: \"white\",\n    \"&.active\": {\n      border: \"2px solid\",\n      borderColor: \"cta_color\",\n      color: \"black\",\n    },\n    \"&.disabled\": {\n      border: \"0px\",\n      color: \"lightGrey\",\n    },\n  },\n  itemText: {\n    margin: 0,\n    paddingTop: \"5px\",\n  },\n  materialDesc: {\n    textAlign: \"left\",\n    px: \"10px\",\n  },\n\n  loaderWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    minHeight: \"20vh\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n\n  variantWrap: {\n    display: \"flex\",\n    width: \"100%\",\n    flexWrap: \"wrap\",\n    minHeight: \"20vh\",\n    justifyContent: \"flex-start\",\n    alignItems: \"center\",\n  },\n  borderWrap: {\n    // border: \"2px solid white\",\n    boxShadow: \"1px 1px 4px rgba(0,0,0,0.2)\",\n    // borderRadius: \"2px\",\n    height: \"100%\",\n    width: [\"46%\", \"31%\", \"31%\", \"46%\", \"46%\", \"31%\"],\n    margin: [\"2%\", \"1%\", \"1%\", \"2%\", \"2%\", \"1%\"],\n    // padding: \"4px\",\n    // height: \"200px\",\n    borderRadius: \"10px\",\n    display: \"flex\",\n    cursor: \"pointer\",\n    flexDirection: \"column\",\n    backgroundColor: \"white\",\n    overflow: \"hidden\",\n\n    \"&.active\": {\n      border: \"2px solid\",\n      borderColor: \"cta_color\",\n\n      boxShadow: \"3px 3px 5px rgba(0,0,0,0.3)\",\n    },\n  },\n  imageWrap: {\n    position: \"relative\",\n    // height: \"80%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n  },\n  variantImage: {\n    position: \"relative\",\n    height: \"170px\",\n  },\n  // openImageIcon: {\n  //   position: \"absolute\",\n  //   top: 0,\n  //   right: 0,\n  //   backgroundColor: \"#00000029\",\n  //   borderRadius: \"2px\",\n  //   cursor: \"pointer\",\n  // },\n  textsWrap: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    // justifyContent: \"flex-start\",\n    padding: \"5px\",\n    textAlign: \"left\",\n  },\n  variantPrice: {\n    margin: 0,\n    // px: \"5px\",\n    // mx: \"2px\",\n    // position: \"absolute\",\n    // bottom: 0,\n    // right: 0,\n    color: \"primary\",\n    fontWeight: 600,\n    // backgroundColor: \"#ffffffe9\",\n    borderRadius: \"2px\",\n    cursor: \"pointer\",\n    // color: \"white\",\n\n    // \"&.active\": {\n    //   color: \"#fe6769\",\n    // },\n  },\n  variantDesc: {\n    lineHeight: 1.2,\n    fontSize: \"0.8rem\",\n    fontWeight: 500,\n    paddingBottom: \"5px\",\n    // borderBottom: \"1px solid lightGrey\",\n    margin: 0,\n  },\n  variantDelivery: {\n    color: \"muted\",\n    m: 0,\n    fontWeight: 600,\n    fontSize: \"0.6rem\",\n  },\n};\n"]},"metadata":{},"sourceType":"module"}