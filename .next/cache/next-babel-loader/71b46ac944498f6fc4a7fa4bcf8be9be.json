{"ast":null,"code":"let promise = null;\n\nconst resetPendingPromise = () => {\n  promise = null;\n};\n\nconst getLazyUploader = (getResult, getPromise) => {\n  return async () => {\n    const result = getResult();\n\n    if (result) {\n      promise = null;\n      console.log(\"Giving him saved result\");\n      return result;\n    }\n\n    if (promise) {\n      console.log(\"Giving him pending promise\");\n      return promise;\n    }\n\n    promise = getPromise();\n    console.log(\"Setting getPromise\");\n    return promise;\n  };\n};\n\nmodule.exports = {\n  getLazyUploader,\n  resetPendingPromise\n};","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/trip_map_staging/src/Lib/getLazyUploader.js"],"names":["promise","resetPendingPromise","getLazyUploader","getResult","getPromise","result","console","log","module","exports"],"mappings":"AAAA,IAAIA,OAAO,GAAG,IAAd;;AAEA,MAAMC,mBAAmB,GAAG,MAAM;AAChCD,EAAAA,OAAO,GAAG,IAAV;AACD,CAFD;;AAIA,MAAME,eAAe,GAAG,CAACC,SAAD,EAAYC,UAAZ,KAA2B;AACjD,SAAO,YAAY;AACjB,UAAMC,MAAM,GAAGF,SAAS,EAAxB;;AAEA,QAAIE,MAAJ,EAAY;AACVL,MAAAA,OAAO,GAAG,IAAV;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AAEA,aAAOF,MAAP;AACD;;AAED,QAAIL,OAAJ,EAAa;AACXM,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AACA,aAAOP,OAAP;AACD;;AAEDA,IAAAA,OAAO,GAAGI,UAAU,EAApB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACA,WAAOP,OAAP;AACD,GAlBD;AAmBD,CApBD;;AAsBAQ,MAAM,CAACC,OAAP,GAAiB;AACfP,EAAAA,eADe;AAEfD,EAAAA;AAFe,CAAjB","sourcesContent":["let promise = null;\n\nconst resetPendingPromise = () => {\n  promise = null;\n};\n\nconst getLazyUploader = (getResult, getPromise) => {\n  return async () => {\n    const result = getResult();\n\n    if (result) {\n      promise = null;\n      console.log(\"Giving him saved result\");\n\n      return result;\n    }\n\n    if (promise) {\n      console.log(\"Giving him pending promise\");\n      return promise;\n    }\n\n    promise = getPromise();\n    console.log(\"Setting getPromise\");\n    return promise;\n  };\n};\n\nmodule.exports = {\n  getLazyUploader,\n  resetPendingPromise,\n};\n"]},"metadata":{},"sourceType":"script"}