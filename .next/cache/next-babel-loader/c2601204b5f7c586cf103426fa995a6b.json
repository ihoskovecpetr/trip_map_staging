{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport axios from \"axios\";\nimport { VARIANTS_PRINTFUL } from \"../constants/constants\";\n\nvar getShippingCostByVariantId = function getShippingCostByVariantId(id) {\n  var _VARIANTS_PRINTFUL$fi;\n\n  return (_VARIANTS_PRINTFUL$fi = VARIANTS_PRINTFUL.find(function (variant) {\n    return variant.id === id;\n  })) === null || _VARIANTS_PRINTFUL$fi === void 0 ? void 0 : _VARIANTS_PRINTFUL$fi.shipping.price;\n};\n\nexport function useGetShippingInfoPrintful(variantId) {\n  _s();\n\n  var _useState = useState(false),\n      isShippingInfoLoading = _useState[0],\n      setIsShippingInfoLoading = _useState[1];\n\n  var _useState2 = useState(null),\n      shippingInfoObject = _useState2[0],\n      setShippingInfoObject = _useState2[1];\n\n  var getSetPrice = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _response$data, response, responseObj;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsShippingInfoLoading(true);\n              setShippingInfoObject(null);\n              _context.next = 5;\n              return axios.post(\"api/shipping-info-printful?variantId=\".concat(variantId));\n\n            case 5:\n              response = _context.sent;\n              setIsShippingInfoLoading(false);\n              responseObj = _objectSpread(_objectSpread({}, response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.result), {}, {\n                rate: getShippingCostByVariantId(variantId)\n              });\n              setShippingInfoObject(responseObj);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.log({\n                e: _context.t0\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function getSetPrice() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getSetPrice();\n  }, [JSON.stringify(variantId)]);\n  var deliveryInfoObject_memo = useMemo(function () {\n    return shippingInfoObject;\n  }, [shippingInfoObject]);\n  return {\n    shippingInfoObject: deliveryInfoObject_memo,\n    isShippingInfoLoading: isShippingInfoLoading\n  };\n}\n\n_s(useGetShippingInfoPrintful, \"MZBLe2zOnInnhkScJbdnNRGcXm8=\");","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/trip_map_staging/src/Hooks/useGetShippingInfoPrintful.js"],"names":["useState","useEffect","useMemo","axios","VARIANTS_PRINTFUL","getShippingCostByVariantId","id","find","variant","shipping","price","useGetShippingInfoPrintful","variantId","isShippingInfoLoading","setIsShippingInfoLoading","shippingInfoObject","setShippingInfoObject","getSetPrice","post","response","responseObj","data","result","rate","console","log","e","JSON","stringify","deliveryInfoObject_memo"],"mappings":";;;;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,OAA9B,QAA6C,OAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,iBAAT,QAAkC,wBAAlC;;AAEA,IAAMC,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACC,EAAD,EAAQ;AAAA;;AACzC,kCAAOF,iBAAiB,CAACG,IAAlB,CAAuB,UAACC,OAAD;AAAA,WAAaA,OAAO,CAACF,EAAR,KAAeA,EAA5B;AAAA,GAAvB,CAAP,0DAAO,sBAAwDG,QAAxD,CAAiEC,KAAxE;AACD,CAFD;;AAIA,OAAO,SAASC,0BAAT,CAAoCC,SAApC,EAA+C;AAAA;;AAAA,kBACMZ,QAAQ,CAAC,KAAD,CADd;AAAA,MAC7Ca,qBAD6C;AAAA,MACtBC,wBADsB;;AAAA,mBAEAd,QAAQ,CAAC,IAAD,CAFR;AAAA,MAE7Ce,kBAF6C;AAAA,MAEzBC,qBAFyB;;AAIpD,MAAMC,WAAW;AAAA,wEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEhBH,cAAAA,wBAAwB,CAAC,IAAD,CAAxB;AACAE,cAAAA,qBAAqB,CAAC,IAAD,CAArB;AAHgB;AAAA,qBAKOb,KAAK,CAACe,IAAN,gDACmBN,SADnB,EALP;;AAAA;AAKVO,cAAAA,QALU;AAShBL,cAAAA,wBAAwB,CAAC,KAAD,CAAxB;AAEMM,cAAAA,WAXU,mCAYXD,QAZW,aAYXA,QAZW,yCAYXA,QAAQ,CAAEE,IAZC,mDAYX,eAAgBC,MAZL;AAadC,gBAAAA,IAAI,EAAElB,0BAA0B,CAACO,SAAD;AAblB;AAgBhBI,cAAAA,qBAAqB,CAACI,WAAD,CAArB;AAhBgB;AAAA;;AAAA;AAAA;AAAA;AAkBhBI,cAAAA,OAAO,CAACC,GAAR,CAAY;AAAEC,gBAAAA,CAAC;AAAH,eAAZ;;AAlBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAXT,WAAW;AAAA;AAAA;AAAA,KAAjB;;AAsBAhB,EAAAA,SAAS,CAAC,YAAM;AACdgB,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACU,IAAI,CAACC,SAAL,CAAehB,SAAf,CAAD,CAFM,CAAT;AAIA,MAAMiB,uBAAuB,GAAG3B,OAAO,CAAC,YAAM;AAC5C,WAAOa,kBAAP;AACD,GAFsC,EAEpC,CAACA,kBAAD,CAFoC,CAAvC;AAIA,SAAO;AAAEA,IAAAA,kBAAkB,EAAEc,uBAAtB;AAA+ChB,IAAAA,qBAAqB,EAArBA;AAA/C,GAAP;AACD;;GAnCeF,0B","sourcesContent":["import { useState, useEffect, useMemo } from \"react\";\nimport axios from \"axios\";\nimport { VARIANTS_PRINTFUL } from \"../constants/constants\";\n\nconst getShippingCostByVariantId = (id) => {\n  return VARIANTS_PRINTFUL.find((variant) => variant.id === id)?.shipping.price;\n};\n\nexport function useGetShippingInfoPrintful(variantId) {\n  const [isShippingInfoLoading, setIsShippingInfoLoading] = useState(false);\n  const [shippingInfoObject, setShippingInfoObject] = useState(null);\n\n  const getSetPrice = async () => {\n    try {\n      setIsShippingInfoLoading(true);\n      setShippingInfoObject(null);\n\n      const response = await axios.post(\n        `api/shipping-info-printful?variantId=${variantId}`\n      );\n\n      setIsShippingInfoLoading(false);\n\n      const responseObj = {\n        ...response?.data?.result,\n        rate: getShippingCostByVariantId(variantId),\n      };\n\n      setShippingInfoObject(responseObj);\n    } catch (e) {\n      console.log({ e });\n    }\n  };\n\n  useEffect(() => {\n    getSetPrice();\n  }, [JSON.stringify(variantId)]);\n\n  const deliveryInfoObject_memo = useMemo(() => {\n    return shippingInfoObject;\n  }, [shippingInfoObject]);\n\n  return { shippingInfoObject: deliveryInfoObject_memo, isShippingInfoLoading };\n}\n"]},"metadata":{},"sourceType":"module"}