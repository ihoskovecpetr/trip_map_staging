{"ast":null,"code":"const {\n  getShippingRateCZ\n} = require(\"./Lib/getShippingRateCZ\");\n\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"POST\":\n      console.log(\"shipping-info-printful variant: \", {\n        reqQueryVariantId: req.query.variantId\n      }); // const axiosConfig = {\n      //   headers: {\n      //     Authorization: `Basic ${process.env.AUTH_KEY_PRINTFUL}`,\n      //     \"Access-Control-Allow-Origin\": \"*\",\n      //   },\n      // };\n      // const body = {\n      //   recipient: {\n      //     address1: \"Krasné\",\n      //     city: \"Tři Sekery\",\n      //     country_code: \"CZ\",\n      //     zip: 35301,\n      //   },\n      //   items: [\n      //     {\n      //       quantity: 1,\n      //       variant_id: req.query.variantId,\n      //     },\n      //     {\n      //       quantity: 1,\n      //       variant_id: 2,\n      //     },\n      //   ],\n      // };\n      // const response = await axios.post(\n      //   `https://api.printful.com/shipping/rates`,\n      //   body,\n      //   axiosConfig\n      // );\n      // console.log({\n      //   responseSHIPCOST: response.data.result[0],\n      //   responseSHIPCOST2: response.data.result[1],\n      // });\n      // const exchangeRateUSD = await exchangeRates()\n      //   .latest()\n      //   .base(\"EUR\")\n      //   .fetch();\n      // const priceEUR = new Big(response.data.result[0].rate);\n      // const priceCZK = priceEUR.times(exchangeRateUSD.CZK).round(0);\n      // // {\n      // // id: 'STANDARD',\n      // // name: 'Flat Rate (Estimated delivery: May 25⁠–Jun 10) ',\n      // // rate: '6.00',\n      // // currency: 'EUR',\n      // // minDeliveryDays: 6,\n      // // maxDeliveryDays: 15\n      // // }\n      // const resultObj = {\n      //   ...response.data.result[0],\n      //   rate: priceCZK,\n      //   currency: \"CZK\",\n      // };\n      // // const finalResult = responses.reduce((acc, resp) => {\n      // //   return {\n      // //     ...acc,\n      // //     [resp.data.result.variant.id]: {\n      // //       price: resp.data.result.variant.price * 1.0,\n      // //       url: resp.data.result.variant.image,\n      // //       currency: resp.data.result.product.currency,\n      // //     },\n      // //   };\n      // // }, {});\n\n      const resultObj = await getShippingRateCZ(req.query.variantId);\n      res.status(200).json({\n        result: resultObj\n      });\n      break;\n\n    default:\n      res.status(405).end(); //Method Not Allowed\n\n      break;\n  }\n});","map":{"version":3,"sources":["/Users/petrhoskovec/Desktop/code/trip_map_staging/src/pages/api/shipping-info-printful.js"],"names":["getShippingRateCZ","require","req","res","method","console","log","reqQueryVariantId","query","variantId","resultObj","status","json","result","end"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAwBC,OAAO,CAAC,yBAAD,CAArC;;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,UAAQD,GAAG,CAACE,MAAZ;AACE,SAAK,MAAL;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ,EAAgD;AAC9CC,QAAAA,iBAAiB,EAAEL,GAAG,CAACM,KAAJ,CAAUC;AADiB,OAAhD,EADF,CAKE;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAMC,SAAS,GAAG,MAAMV,iBAAiB,CAACE,GAAG,CAACM,KAAJ,CAAUC,SAAX,CAAzC;AAEAN,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,QAAAA,MAAM,EAAEH;AADW,OAArB;AAIA;;AACF;AACEP,MAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBG,GAAhB,GADF,CACyB;;AACvB;AAtFJ;AAwFD,CAzFD","sourcesContent":["const { getShippingRateCZ } = require(\"./Lib/getShippingRateCZ\");\n\nexport default async (req, res) => {\n  switch (req.method) {\n    case \"POST\":\n      console.log(\"shipping-info-printful variant: \", {\n        reqQueryVariantId: req.query.variantId,\n      });\n\n      // const axiosConfig = {\n      //   headers: {\n      //     Authorization: `Basic ${process.env.AUTH_KEY_PRINTFUL}`,\n      //     \"Access-Control-Allow-Origin\": \"*\",\n      //   },\n      // };\n\n      // const body = {\n      //   recipient: {\n      //     address1: \"Krasné\",\n      //     city: \"Tři Sekery\",\n      //     country_code: \"CZ\",\n      //     zip: 35301,\n      //   },\n      //   items: [\n      //     {\n      //       quantity: 1,\n      //       variant_id: req.query.variantId,\n      //     },\n      //     {\n      //       quantity: 1,\n      //       variant_id: 2,\n      //     },\n      //   ],\n      // };\n\n      // const response = await axios.post(\n      //   `https://api.printful.com/shipping/rates`,\n      //   body,\n      //   axiosConfig\n      // );\n\n      // console.log({\n      //   responseSHIPCOST: response.data.result[0],\n      //   responseSHIPCOST2: response.data.result[1],\n      // });\n\n      // const exchangeRateUSD = await exchangeRates()\n      //   .latest()\n      //   .base(\"EUR\")\n      //   .fetch();\n\n      // const priceEUR = new Big(response.data.result[0].rate);\n      // const priceCZK = priceEUR.times(exchangeRateUSD.CZK).round(0);\n\n      // // {\n      // // id: 'STANDARD',\n      // // name: 'Flat Rate (Estimated delivery: May 25⁠–Jun 10) ',\n      // // rate: '6.00',\n      // // currency: 'EUR',\n      // // minDeliveryDays: 6,\n      // // maxDeliveryDays: 15\n      // // }\n\n      // const resultObj = {\n      //   ...response.data.result[0],\n      //   rate: priceCZK,\n      //   currency: \"CZK\",\n      // };\n\n      // // const finalResult = responses.reduce((acc, resp) => {\n      // //   return {\n      // //     ...acc,\n      // //     [resp.data.result.variant.id]: {\n      // //       price: resp.data.result.variant.price * 1.0,\n      // //       url: resp.data.result.variant.image,\n      // //       currency: resp.data.result.product.currency,\n      // //     },\n      // //   };\n      // // }, {});\n\n      const resultObj = await getShippingRateCZ(req.query.variantId);\n\n      res.status(200).json({\n        result: resultObj,\n      });\n\n      break;\n    default:\n      res.status(405).end(); //Method Not Allowed\n      break;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}